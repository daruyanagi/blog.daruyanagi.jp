
+++
date = "2014-07-03 03:56:24 +0000 UTC"
draft = false
title = "WebMatrix：ルビを振るためのヘルパーを作ってみる"
tags = ["WebMatrix","ASP.net Web Pages"]

+++


{{< figure src="/images/20140703034425.png"  >}}

りあえずオーソドックスに App_Code フォルダ以下に Ruby.cshtml を作ってこんな感じに記述。
```cs
# ~/Ruby.cshtml

@helper GetHtml(string text, string ruby){
    &lt;ruby>&lt;rb>@text&lt;/rb>&lt;rp>（&lt;/rp>&lt;rt>@ruby&lt;/rt>&lt;rp>）&lt;/rp>&lt;/ruby>
}

```使い方はこんな感じ .cshtml の名前がそのまま静的クラスの名前になっていて、定義したヘルパー関数が呼べる。
```cs
# ~/Test.cshtml

@{
    
}

&lt;!DOCTYPE html>

&lt;html lang="en">
    &lt;head>
        &lt;meta charset="utf-8" />
        &lt;title>&lt;/title>
    &lt;/head>
    &lt;body>
        @Ruby.GetHtml("柳 英俊", "やなぎ ひでとし")
    &lt;/body>
&lt;/html>

```

{{< figure src="/images/20140703034801.png"  >}}

※見やすいように拡大してある）自分はルビのタグなんか覚えるの面倒だし、ましてやルビタグが解釈できない Firefox のことまで考えてコーディングするのは面倒なので、こういうヘルパーを作るのが好み。

<div class="section">
    ### ちょっとハッテン
    ```cs
# ~/App_Code/HtmlHelperExtensions.cs

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.WebPages.Html;

public static class HtmlHelperExtenstion
{
   public static IHtmlString Ruby(this HtmlHelper helper, string text, string ruby)
   {
       return new HtmlString(string.Format(
          "<ruby><rb>{0}</rb><rp>（</rp><rt>{1}</rt><rp>）</rp></ruby>",
          text, ruby
       ));
   }
}

```こうやって HtmlHelper の拡張メソッドとして定義しておけば
```cs
@Html.Ruby("柳 英俊", "やなぎ ひでとし")

```で同様のことができるようになる。

</div>

