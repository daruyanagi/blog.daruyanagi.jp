
+++
date = "2017-09-17 04:10:58 +0000 UTC"
draft = false
title = "Omawari 1.0.0.0：Web 更新チェッカー的なものを作りました"
tags = ["Omawari","WPF"]

+++


{{< figure src="/images/20170917040335.png"  >}}

の前作ったスクレイピングサービスを Microsoft Azure Web Apps に載せたのですが……[Razor Pages：PhantomJS で動的サイトをスクレイピングする（2） - だるろぐ](http://blog.daruyanagi.jp/entry/2017/09/09/171921)動かなかったので（そりゃそうか？）、WPF アプリケーションにしました。

{{< figure src="/images/20170917040550.png"  >}}

ーゲットとなる URI を登録すると、定期的にスクレイピングしてくれます。CSS セレクターが使えるので、ページの一部分だけ保存することが可能です<a href="#f-9629f3c9" name="fn-9629f3c9" title="全部を保存するときは“document”とか“body”とかしておけばいいと思う。そういえば試してないけど">*1</a>。あと、シングルページアプリケーションのために、動的サイトをスクレイピングする機能を追加しました。

{{< figure src="/images/20170917040812.png"  >}}

ーカルに保存したログは、Diff をとってみることができます<a href="#f-8c2c52ba" name="fn-8c2c52ba" title="文字化けする……右クリックメニューからエンコーディングを UTF-8 にすると治せます">*2</a>。データフォルダーをオンラインストレージに指定しておくと（初回利用時に選択できます）、複数環境でデータを同期できて便利かもしれない。
<div class="github-card" data-user="daruyanagi/Omawari/releases/tag" data-repo="v1.0.0.0" data-width="400" data-height="" data-theme="default"></div

>
<script src="https://cdn.jsdelivr.net/github-cards/latest/widget.js"></script>
コードが汚いのをなんとかしたいのと、更新を検出したときにデスクトップ通知を出すだけだと見逃しちゃうかもなので、なんかいい方法を考えようかなと思います。
<div class="footnote">
<a href="#fn-9629f3c9" name="f-9629f3c9" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">全部を保存するときは“document”とか“body”とかしておけばいいと思う。そういえば試してないけど</span>
<a href="#fn-8c2c52ba" name="f-8c2c52ba" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">文字化けする……右クリックメニューからエンコーディングを UTF-8 にすると治せます</span>
</div>

