
+++
date = "2017-05-12 00:35:39 +0000 UTC"
draft = false
title = "PowerShell：String を String で分割する"
tags = ["PowerShell"]

+++
まだまだ PowerShell がカタコトしかしゃべれないチンカスですが、皆様はいかがお過ごしでしょうか。さて、この間こんな感じのコードを書いたんですよ。
```ps1
$text = &#39;Microsoft Edge on Windows 10 Version 1511 for x64-based Systems&#39;

$text.Split(&#39; on &#39;)[-1] 

```意図としては、文字列を“ on ”で分割して後ろ部分“Windows 10 Version 1511 for x64-based Systems”を取り出したい、みたいな感じだったのですが……結果はこうでした
```
Systems
```そもそも <code>String.Split()</code> のシグネチャを間違えて雰囲気で書いてしまっているので正しく動作するはずはないのですが、一瞬なんでこんな結果になるのかわからず ( ；´Д｀)？ となってしまいました。ちょっと考えたらわかるのですが、<code>&#39; on &#39;</code> が <code>char</code> の配列として解釈され、.NET でいうところの
```cs
text.Split(new char[] { &#39; &#39;, &#39;o&#39;, &#39;n&#39;, &#39; &#39; })

```が実行されたんですね？（C# ならコンパイルエラーで止まる、というか、IntelliSense が補ってくれるから間違えない）　ためしに <code>| write</code> と書き足してみたところ、ぐちゃぐちゃに引き裂かれた文字列たちが出力されました(´；ω；`)ｳｯ…でも、これちょっと面白いかも。文字列を文字列で分割したい場合、.NET だと <code>String.Split(string[], StringSplitOptions)</code> を使えばよいので、PowerShell だとこんな感じになるみたいです。
```ps1
// text.Split(new string[] { " on " }, StringSplitOptions.None) のつもり

$text.Split(@(" on "), &#39;None&#39;)[-1]

```これでいいのかイマイチよくわかっていないのですが、これで意図通りに動きました。
```
Windows 10 Version 1511 for x64-based Systems
```ちょっと気持ち悪いような、なるほど、みたいな、不思議な感じ。でも、みなさんは PowerShell なのだから PowerShell っぽく書くのがよいと思います。
```ps1
($text -split &#39; on &#39;)[-1]

```<code>-split</code> 演算子というのが用意されているので、これを使えばいいでしょう。なんか正規表現も使えるらしいぜ？まだまだ PowerShell がちゃんとしゃべれなくて恥ずかしいですが、少しずつ使いこなせるようになりたいと思います。


