
+++
date = "2012-07-05 02:29:27 +0000 UTC"
draft = false
title = "XREA/CoreServer の WordPress を Windows Azure Websites に移植してみる → 成功！"
tags = ["Windows Azure","WebMatrix","WordPress"]

+++
<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120705/20120705021250.jpg" alt="f:id:daruyanagi:20120705021250j:plain" title="f:id:daruyanagi:20120705021250j:plain" class="hatena-fotolife"/>（Windows 8 の Metro アプリ「黒板」で書いてみました<a href="#f1" name="fn1" title="関係ないけど、 Sumsung Series 7 Slate/Windows 8 のタッチパネルドライバーはちょっと不安定で、時間が経過するとタッチした部分以外にも縦一直線に複数ポイント反応することがある。これではお絵かきができない……">*1</a>）前回（<a href="http://daruyanagi.hatenablog.com/entry/2012/07/05/015015">XREA/CoreServer の WordPress を Windows Azure Websites に移植してみる → あと一歩まで行けた - だるろぐ</a>）は、XREA/CoreServer の WordPress 環境をローカルに保存して、 WebMatrix で動作可能な状態までメンテナンスし、 Windows Azure Websites へアップロードするというフローで、 WordPress の引っ越しを目論んだ……が最後の最後で失敗した。そのときのエラーログの一部がこれ。
```
0:30:02: エラーの詳細:
0:30:02: An error occurred during execution of the database script. The error occurred between the following lines of the script: "145" and "255". The verbose log might have more information about the error. The command started with the following:
0:30:02: "--
-- Dumping data for table `wp_morpheme`
```**wp_morpheme** テーブルってなんだろう。調べてみると、どうやら <a href="http://wordpress.org/extend/plugins/wordpress-23-related-posts-plugin/">WordPress › WordPress Related Posts « WordPress Plugins</a> というプラグインが作成する形態素解析データのテーブルらしい。<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120705/20120705021824.png" alt="f:id:daruyanagi:20120705021824p:plain" title="f:id:daruyanagi:20120705021824p:plain" class="hatena-fotolife"/>すんごくデカくて、 WebMatrix で開こうと思ったら固まりかけるぐらい。なんだか無駄に肥大化してるっぽいしそんなに必要ないので、バッサリと削除することに。<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120705/20120705022037.png" alt="f:id:daruyanagi:20120705022037p:plain" title="f:id:daruyanagi:20120705022037p:plain" class="hatena-fotolife"/>成功━━━━(ﾟ∀ﾟ)━━━━!!　あとは、旧ドメインへのアクセスを cname で Azure のドメインへ飛ばせばいい。その前にもう少しデザインをなんとか改善したいかな。そう、 WebMatrix でね！<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120705/20120705022310.png" alt="f:id:daruyanagi:20120705022310p:plain" title="f:id:daruyanagi:20120705022310p:plain" class="hatena-fotolife"/>ちなみにダンプファイルのサイズは 100MB ちょっとでした<a href="#f2" name="fn2" title="すべてテキストなので、かなりの大きさですね。さすが4年間やってきただけのことはある">*2</a>。そのうちどれぐらいを wp_morpheme が占めていたのか……面倒なので調べてないけど。ふぅ……これで寝られる！
<div class="footnote">
<a href="#fn1" name="f1" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">関係ないけど、 Sumsung Series 7 Slate/Windows 8 のタッチパネルドライバーはちょっと不安定で、時間が経過するとタッチした部分以外にも縦一直線に複数ポイント反応することがある。これではお絵かきができない……</span>
<a href="#fn2" name="f2" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">すべてテキストなので、かなりの大きさですね。さすが4年間やってきただけのことはある</span>
</div>

