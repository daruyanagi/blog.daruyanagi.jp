<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <base href="http://daruyanagi.net/" />
        <link rel="canonical" href="http://daruyanagi.net/entry/2012/08/10/012651/" />

        <meta name="viewport" content="width=device-width,initial-scale=1">

        <title> 
            WebMatrix &#43; ASP.NET Web Pages でキレイにコーディングしたい（3） | だるやなぎ
        </title>

        

        
            
        

        
            <meta name="description" content="だるさん、Razor には @functions って記法もあるんやで— しばやん (@shibayan) 2012年8月8日知ってたさ！　でも、なんか Func&lt;&gt; ってカッコいいから使ってみたかったんだよ！*1
 ### @functions というわけで、レイアウトファイルで @functions を使ってみた。 ```cs &lt;!DOCTYPE html &lt;html lang=&rdquo;@App.Language&quot;&gt; &lt;head&gt; : : &lt;div id=&quot;site-content&quot;&gt; &lt;article id=&quot;site-body&quot;&gt; @RenderBody() &lt;/article&gt; &lt;aside id=&quot;site-sidebar&quot;&gt; @RenderSideBar() &lt;/aside&gt; &lt;/div&gt;
 &amp;lt;footer id=&quot;site-footer&quot;&gt;  @RenderFooter() &lt;/footer&gt; &lt;/body&gt; &lt;/html&gt;
@functions { public HelperResult RenderHeader() { return RenderPage(&quot;_Header.cshtml&rdquo;); } public HelperResult RenderNavigation() { return RenderPage(&quot;_Navigation.cshtml&rdquo;); } public HelperResult RenderSideBar() { return RenderPage(&quot;_SideBar.cshtml&rdquo;); } public HelperResult RenderFooter() { return RenderPage(&quot;_Footer." />
        

        
        
        <link rel="stylesheet" href="css/style.css">

    </head>
    <body class="body">

        <header class="global-header">
            <h1><a href="/" >だるやなぎ</a></h1>

<p>そうだ、だるだるしよう。</p>


        </header>

        <main>
            
    <article class="entry">

        <div class="entry__header">
            <div class="entry__header-taxonomies">
                
                
                    <div class="entry__header-taxonomies-category">
                        <span class="entry__header-taxonomies-category-title">
                            <a class="entry__header-taxonomies-category-title-link" href="http://daruyanagi.net/entry/">
                                Entries
                            </a>
                        </span>
                    </div>
                
                
                    <div class="entry__header-taxonomies-tags">
                        <ul class="entry__header-taxonomies-tags-list" >
                            
                                
                                
                                    <li class="entry__header-taxonomies-tags-list-item">
                                        <a class="entry__header-taxonomies-tags-list-itelink" href="http://daruyanagi.net/tags/asp.net-web-pages/">ASP.net Web Pages</a>
                                    </li>
                                
                            
                                
                                
                                    <li class="entry__header-taxonomies-tags-list-item">
                                        <a class="entry__header-taxonomies-tags-list-itelink" href="http://daruyanagi.net/tags/webmatrix/">WebMatrix</a>
                                    </li>
                                
                            
                        </ul>
                    </div>
                
            </div>

            <div class="entry__header-title">
                <a class="entry__header-title-link" href="http://daruyanagi.net/entry/2012/08/10/012651/" >
                    <h1 class="entry__header-title-link-text">WebMatrix &#43; ASP.NET Web Pages でキレイにコーディングしたい（3）</h1>
                </a>
            </div>

            <div class="entry__header-date">
                <P>公開日：<time>2012/08/10</time>
                </P>
            </div>

        </div>
        <div class="entry__content">
            <blockquote>
<p>だるさん、Razor には @functions って記法もあるんやで— しばやん (@shibayan) 2012年8月8日<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>知ってたさ！　でも、なんか Func&lt;&gt; ってカッコいいから使ってみたかったんだよ！<a href="#f-d33ff292" name="fn-d33ff292" title="忘れてた">*1</a><br/></p>
</blockquote>
<div class="section">
    ### @functions
    というわけで、レイアウトファイルで @functions を使ってみた。
```cs
&lt;!DOCTYPE html>
<p>&lt;html lang=&rdquo;@App.Language&quot;&gt;
&lt;head&gt;
:
:
&lt;div id=&quot;site-content&quot;&gt;
&lt;article id=&quot;site-body&quot;&gt;
@RenderBody()
&lt;/article&gt;
&lt;aside id=&quot;site-sidebar&quot;&gt;
@RenderSideBar()
&lt;/aside&gt;
&lt;/div&gt;</p>
<pre><code>    &amp;lt;footer id=&quot;site-footer&quot;&gt;
</code></pre>
<p>@RenderFooter()
&lt;/footer&gt;
&lt;/body&gt;
&lt;/html&gt;</p>
<p>@functions {
public HelperResult RenderHeader()
{
return RenderPage(&quot;_Header.cshtml&rdquo;);
}
public HelperResult RenderNavigation()
{
return RenderPage(&quot;_Navigation.cshtml&rdquo;);
}
public HelperResult RenderSideBar()
{
return RenderPage(&quot;_SideBar.cshtml&rdquo;);
}
public HelperResult RenderFooter()
{
return RenderPage(&quot;_Footer.cshtml&rdquo;);
}
}</p>
<pre><code class="language-@functions{……}" data-lang="@functions{……}">
    &gt;
        とりあえず今のところ単純なラムダ式でなんとかなっているけれど、たとえばRenderFooter でエラー処理を追加する場合（“_Footer.cshtml”がない場合がありえる）を考えると、「レイアウトファイルを簡潔にしたい」という目的からはだいぶ外れてくる。

        WebMatrix + ASP.NET Web Pages でキレイにコーディングしたい（2） - だるろぐ
    
という懸念はないね。ながながとラムダ式を書くのはアレだけれど、一般的な関数ならばまぁ、いいや。あと、冒頭じゃなくて末尾に書けるのも何気に美味しい。レイアウトファイルのメインはあくまでも HTML ファイルだと思うし、ユーティリティ関数みたいなのは隅っこに書いておきたいって思う。 @{……} セクションで宣言した変数だと使う前に宣言しておかないとダメみたいだけれど、 @functions{……} で宣言した関数はあとで宣言してもいいみたいだ。<figure>
    <img src="/images/20120810011157.png"/> 
</figure>
Visual Studio のツールチップでみてみたのだけれど、何がなんだかよくわかんないね。なんなんだろう、このテンポラリクラスは。こうなってくると、ちょっと中身を知りたくなってくる。あと、テンポラリクラス名でわかるかもしれないけれど、テーマ機能もつけてみた。

    &gt;
        今見返してふと思ったのは、比較的簡単にテーマ機能なんかを実装できるなということ。ただデザインを変えたいがために、毎回一からこんなの作るのはアホらしい。

        WebMatrix + ASP.NET Web Pages でキレイにコーディングしたい - だるろぐ
    
その話はまた今度するかもしれないし、しないかもしれない。ちなみに、このコーナーはあくまでも自分の試行錯誤を書いてみただけで、このやり方が正しいというわけでは**決してない**ので注意してください。

&lt;/div&gt;&lt;div class=&quot;footnote&quot;&gt;
&lt;a href=&quot;#fn-d33ff292&quot; name=&quot;f-d33ff292&quot; class=&quot;footnote-number&quot;&gt;*1&lt;/a&gt;&lt;span class=&quot;footnote-delimiter&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;footnote-text&quot;&gt;忘れてた&lt;/span&gt;
&lt;/div&gt;

</code></pre>
        </div>
        <div class="entry__footer">
            
            <div class="entry__footer-navigation">
                <span class="entry__footer-prev">
                     <a class="entry__page-navigation-link" href="http://daruyanagi.net/entry/2012/08/10/155258/">&laquo; 前の記事</a> 
                </span>
                <span class="entry__footer-lastmod">
                    
                    最終更新日：<time
                        datetime="2012-08-10T01:26:51JST">2012/08/10</time>
                    
                </span>
                <span class="entry__footer-next">
                     <a class="entry__page-navigation-link" href="http://daruyanagi.net/entry/2012/08/09/201527/">次の記事 &raquo; </a> 
                </span>
            </div>
        </div>

    </article>

        </main>

        <footer class="global-footer">
            <p>&copy; 2020 daruyanagi.</p>

        </footer>
    </body>
</html>