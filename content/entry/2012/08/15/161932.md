
+++
date = "2012-08-15 16:19:32 +0000 UTC"
draft = false
title = "WebMatrix で LESS を使おう！"
tags = ["ASP.net Web Pages","WebMatrix"]

+++
>
        **LESS** はスタイルシートで variables、mixins、operations、functions などを使えるように拡張した“The dynamic stylesheet language”です。ソースコードは“.less”ファイルに記述し、コンパイラで“.css”へ変換して利用します。変換はサーバーサイドだけでなく、 JavaScript を利用してクライアントサイドで行うことも可能*1。結局、何が言いたいかというと、大規模なスタイルシートを書く場合にあるとかんなり便利です。

    
「WebMatrix 2」ではこの LESS が簡単に使えるんですよネ。まずは、［拡張機能］ボタンから「OrangeBits Compiler」をインストール。<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120815/20120815155123.png" alt="f:id:daruyanagi:20120815155123p:plain" title="f:id:daruyanagi:20120815155123p:plain" class="hatena-fotolife"/>あんまり関係ないけれど、［拡張機能］と［NuGet］は最初ちょっと混乱してしまうかもしれない。でもとりあえず、

<ul>
<li>［拡張機能］：「WebMatrix 2」そのものをパワーアップ</li>
<li>［NuGet］：「WebMatrix 2」で編集している“プロジェクト”を簡単に拡張</li>
</ul>という感じでとらえておけばいいと思う。

<div class="section">
    ### .less ファイルを記述
    ```css
# Sample.less

@theme-color: blue;

body {
    background-color: @theme-color;
}

```まずはこんな感じで .less ファイルを記述。変数（variables）が使えるので、テーマカラーの一括変更なんかが簡単に行える。<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120815/20120815155557.png" alt="f:id:daruyanagi:20120815155557p:plain" title="f:id:daruyanagi:20120815155557p:plain" class="hatena-fotolife"/>変数の入力補完が使えるのも便利！　

</div>
<div class="section">
    ### .css ファイルへの自動コンパイル
    “Sample.less”を記述すると“Sample.css”が自動生成されるので、その中身を見てみよう。<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120815/20120815160117.png" alt="f:id:daruyanagi:20120815160117p:plain" title="f:id:daruyanagi:20120815160117p:plain" class="hatena-fotolife"/>ちゃんと @theme-color 変数が blue に置き換えられているのがわかる。
```css
/* -------------------------------------------------------------------------
 * !!! AUTOMATICALLY GENERATED CODE !!!
 * -------------------------------------------------------------------------
 * This file was automatically generated by the OrangeBits compiler.  
 * Compiled on:  2012/08/15 15:28:59
 * Compiled by: pc-yanagi-main\Hidetoshi Yanagi
 * Source: C:\Users\Hidetoshi Yanagi\Documents\My Web Sites\Template\Themes\Default\Styles\Sample.less      
 * -------------------------------------------------------------------------*/


body {
  background-color: blue;
}

```余計なコメントがくっついていてちょっと冗長な感じ。

</div>
<div class="section">
    ### .css ファイルの Minify （軽量化）
    けれど、「OrangeBits Compiler」には Minify 機能もついているので大丈夫。冗長な表現を削って、ファイルのペイロード（転送する際のサイズ）を少なくしてくれる。<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120815/20120815160433.png" alt="f:id:daruyanagi:20120815160433p:plain" title="f:id:daruyanagi:20120815160433p:plain" class="hatena-fotolife"/>使い方は簡単で、コンテキストメニューから［Minify］を選択するだけ。オプションで Auto Minify 機能を利用することもできる。<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120815/20120815160744.png" alt="f:id:daruyanagi:20120815160744p:plain" title="f:id:daruyanagi:20120815160744p:plain" class="hatena-fotolife"/>“Sample.min.css”が生成され、コードがめちゃくちゃ短くなった！LESS は変数以外にも、

<ul>
<li>Mixins（スタイルをグループ化して置き換え、変数を渡して関数のように使うこともできる）</li>
<li>Nested Rules（ルールのネスト）</li>
<li>Operations（値の計算。マージンや色の計算に便利）</li>
<li>Functions（値の計算に便利なビルトイン関数が最初から用意されている）</li>
</ul>みたいな機能があるので便利。「OrangeBits Compiler」自体はほかの言語にも対応しているけれど、個人的には小規模 Web サイトでも便利なのはやっぱりこの LESS かなぁ、と思う。「WebMatrix + ASP.NET Web Pages でキレイにコーディングしたい」シリーズでも、 LESS で CSS を書いていくつもり！。

<ul>
<li><a href="http://blogs.msdn.com/b/chack/archive/2012/06/19/new-features-webmatrix-2-osc-2012-hokkaido-session-follow-up.aspx">
	WebMatrix 2 新機能 ～ OSC 2012 Hokkaido セッション フォローアップ (その１) ～ - THE TRUTH IS OUT THERE - Site Home - MSDN Blogs
</a></li>
<li><a href="http://blogs.msdn.com/b/chack/archive/2012/08/14/how-to-use-minifier-of-javascript-and-css-on-webmatrix-2.aspx">
	WebMatrix 2 で JavaScript や CSS を最小化する方法 - THE TRUTH IS OUT THERE - Site Home - MSDN Blogs
</a></li>
</ul>
</div><div class="footnote">
<a href="#fn1" name="f1" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">「WebMatrix 2」は開発時コンパイルなのでサーバーにもクライアントにも負荷をかけないぞ！</span>
</div>

