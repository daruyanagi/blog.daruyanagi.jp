
+++
date = "2012-09-09 17:22:43 +0000 UTC"
draft = false
title = "WebMatrix で LESS を使おう！（2）"
tags = ["WebMatrix"]

+++
{{< figure src="/images/20120829200628.png"  >}}<a href="https://blog.daruyanagi.jp/entry/2012/09/03/093520">WebMatrix でユーザー認証機能（5） ―― ロール - だるろぐ</a> なんかで使っているラベル用の CSS は LESS で書いている。変数とか関数とか使えないと、この程度の CSS を書くだけで簡単に破たんできるぜ……。で、どうやって使うのかというと……例えば、
```html


&lt;html lang="ja">
    &lt;head>
        &lt;meta charset="utf-8" />
        &lt;title>マイ サイトのタイトル&lt;/title>
        &lt;link href="~/favicon.ico" rel="shortcut icon"
              type="image/x-icon" />
        &lt;link href="~/Content/StyleSheet.css" rel="stylesheet"
              type="text/css" />
    &lt;/head>
    &lt;body>
        &lt;div class="message error">
            エラーが発生しました。     
        &lt;/div>
        &lt;div class="message info">
            お知らせが1件あります。     
        &lt;/div>
        &lt;div class="message warning">
            注意してください。     
        &lt;/div>
    &lt;/body>
&lt;/html>

```こんな cshtml があるとする。次に、新規作成のダイアログで［すべて］タブを選択し、LESS ファイルを作成する。{{< figure src="/images/20120909171100.png"  >}}パスは ~/Content/StyleSheet.less （css → less にするだけ）だよ。あとはどんどん書いていくんだぜ～！　保存するたんびに「OrangeBits Compiler」（後述）が CSS （~/Content/StyleSheet.css）へ変換してくれるから楽ちんでいい。
```css
body {
    font-family: Meiryo, sans-serif;
}

.error {
    .message-status("ERROR", red)
}

.info {
    .message-status("INFO", steelblue)
}

.warning {
    .message-status("WARNING", orange)
}

```関数<a href="#f-b0036404" name="fn-b0036404" title="Mixin（ミックスイン）っていうのかな？">*1</a>のおかげで、メインの部分はこんなにコンパクトだよ。ちなみに message-status というイケてない名前の関数の中身は、以下の通り。上のスタイルシートの続きに書いていく。だいたいそんな感じで使うんだなっていうのがわかると思う。
```css
.message-status(@label, @base-color) {
    // 引数がとれる！

    // 変数の宣言と組み込み関数による色の演算
    @dark-color: darken(@base-color, 5%);
    @light-color: lighten(@base-color, 45%);
        
    border: 1px solid black;
    border-color: @dark-color;
    color: @dark-color;
    background-color: @light-color;
    
    margin: 1em;
    padding: 1em;
    .rounded-box(); // &lt;- スタイルの Mixin
    
    // ネストしたスタイルの指定
    // &amp; はちょっと特殊な変数（？）で、現在の要素を表す 
    // &amp;:before を .label で使うと .label:before になる
    &amp;:before {
        content: @label;
        font-size: 80%;
        color: white;
        background-color: @dark-color;
        padding: 0 0.5em;
        .rounded-box(3px);
    }
}

.rounded-box (@radius: 5px) { // &lt;- 超便利じゃない？
    border-radius: @radius;
    -webkit-border-radius: @radius;
    -moz-border-radius: @radius;
}

```{{< figure src="/images/20120909170137.png"  >}}こうやってまとめられるところはまとめておくと、CSS が肥大化してもメンテナンス性・可読性への影響が少ないんじゃないかな。{{< figure src="/images/20120909171526.png"  >}}邪魔ならみえないように折りたたんでおくこともできるしね。WebMatrix 2 では、追加で「Orangebits Compiler」を導入することで、この LESS が簡単に扱えるようになっているのでぜひ試すべし。

<ul>
<li><a href="https://blog.daruyanagi.jp/entry/2012/08/15/161932">WebMatrix で LESS を使おう！ - だるろぐ</a></li>
</ul><div class="footnote">
<a href="#fn-b0036404" name="f-b0036404" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">Mixin（ミックスイン）っていうのかな？</span>
</div>

