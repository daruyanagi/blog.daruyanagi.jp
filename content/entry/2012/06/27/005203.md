
+++
date = "2012-06-27 00:52:03 +0000 UTC"
draft = false
title = "Windows Azure Web Sites と WebMatrix 2 の組み合わせはマーベラス！"
tags = ["Windows Azure","WordPress","WebMatrix"]

+++
<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120627/20120627001646.png" alt="f:id:daruyanagi:20120627001646p:plain" title="f:id:daruyanagi:20120627001646p:plain" class="hatena-fotolife"/>今日は、 <a href="http://daruyanagi.hatenablog.com/entry/2012/06/25/214555">Windows Azure Web Sites でサクッと WordPress をセットアップしてみた - だるろぐ</a> をローカルにダウンロード・管理する。やっと「WebMatrix 2」の登場だ！　またインストールしていない人はしておくように。<a href="http://www.forest.impress.co.jp/docs/news/20120608_538907.html">窓の杜 - 【NEWS】「WebMatrix 2」がリリース候補版に、“Node.js”サポートや“Azure”連携を追加</a>

<div class="section">
    ### リモートサイトへの接続
    <img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120627/20120627001655.png" alt="f:id:daruyanagi:20120627001655p:plain" title="f:id:daruyanagi:20120627001655p:plain" class="hatena-fotolife"/>まず起動。［リモートサイト］を選択する。<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120627/20120627001708.png" alt="f:id:daruyanagi:20120627001708p:plain" title="f:id:daruyanagi:20120627001708p:plain" class="hatena-fotolife"/>……とその前に、 Azure の管理ポータルで公開プロファイルをダウンロードしておく。なぜかというと……<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120627/20120627001719.png" alt="f:id:daruyanagi:20120627001719p:plain" title="f:id:daruyanagi:20120627001719p:plain" class="hatena-fotolife"/>次で使うからだ。公開プロファイルを読み込めば、それだけで設定完了！　これすんごい楽チンじゃなイカ！

<div class="section">
    #### ちょっとトラブル……
    <img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120627/20120627001736.png" alt="f:id:daruyanagi:20120627001736p:plain" title="f:id:daruyanagi:20120627001736p:plain" class="hatena-fotolife"/>しかし、うちの環境ではここで「WebMatrix 2」がフリーズ。<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120627/20120627001747.png" alt="f:id:daruyanagi:20120627001747p:plain" title="f:id:daruyanagi:20120627001747p:plain" class="hatena-fotolife"/>原因は「Git for WebMatrix」だった。未導入の場合は問題なく作業を進められるんじゃいかな。うちの場合も、再起動すればそのまま作業を進めることができた。<a href="http://www.forest.impress.co.jp/docs/review/20120620_540492.html">窓の杜 - 【REVIEW】バージョン管理システム「Git」を「WebMatrix 2」へ統合「Git for WebMatrix」</a>話は変わるけど、拡張機能がクラッシュしたら次回起動時に無効化してくれるのは親切な設計だと思う。当たり前のことかもしれないけれど、当たり前にやってくれるアプリは少ない。まだリリース候補版だけど、なかなか完成度は高い。

</div>
</div>
<div class="section">
    ### Webサイトのダウンロード
    <img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120627/20120627001800.png" alt="f:id:daruyanagi:20120627001800p:plain" title="f:id:daruyanagi:20120627001800p:plain" class="hatena-fotolife"/>気を取り直して作業再開。リモート接続が完了したら、［ダウンロード］ボタンを押してWebサイトをローカルへダウンロード。「Web配置」を利用しているので、データベースの内容もダウンロードできるのがうれしい。本番（リモート）環境とローカル環境のデータが同期できるため、より近い状態でテストできる。リモートへのデータ反映も［発行］（アップロード）で行える。<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120627/20120627001806.png" alt="f:id:daruyanagi:20120627001806p:plain" title="f:id:daruyanagi:20120627001806p:plain" class="hatena-fotolife"/><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120627/20120627001812.png" alt="f:id:daruyanagi:20120627001812p:plain" title="f:id:daruyanagi:20120627001812p:plain" class="hatena-fotolife"/><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120627/20120627001818.png" alt="f:id:daruyanagi:20120627001818p:plain" title="f:id:daruyanagi:20120627001818p:plain" class="hatena-fotolife"/>ダウンロードの際は、必要なパッケージのインストール（依存性解決）も勝手にやってくれる。多少時間がかかる場合があるけれども、ちょっと我慢しよう。今回はそんなに時間がかからなかった。

</div>
<div class="section">
    ### Webサイトの管理と再発行
    <img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120627/20120627001824.png" alt="f:id:daruyanagi:20120627001824p:plain" title="f:id:daruyanagi:20120627001824p:plain" class="hatena-fotolife"/>完成！　管理画面へのリンクがリボンに追加されている。あと、「WordPress」の独自関数を入力補完できるのも「WebMatrix 2」ならではといった感じ。<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120627/20120627001831.png" alt="f:id:daruyanagi:20120627001831p:plain" title="f:id:daruyanagi:20120627001831p:plain" class="hatena-fotolife"/>今回は、 Azure でセットアップした「WordPress」のバージョンが少し古かったので、プラグイン・テーマともどもローカルでアップデートして、それを［発行］しておいた。リモートで直接アップデートするより、ローカルで一度相性を確認しておいたほうが安全だよね！

</div>

