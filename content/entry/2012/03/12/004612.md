
+++
date = "2012-03-12 00:46:12 +0000 UTC"
draft = false
title = "なんでフック、すぐに死んでまうん……"
tags = ["C#","Win32"]

+++
<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120312/20120312003952.png" alt="f:id:daruyanagi:20120312003952p:plain" title="f:id:daruyanagi:20120312003952p:plain" class="hatena-fotolife"/>せっかく公開した SoundKeyboard 2012 なのだけど、ちょっとしたバグがある。長い間放置してると、音が鳴らなくなり、サウンドパックを切り替えようとするとエラーで落ちる。どうも、フックが勝手に外れてしまうらしい。{{< tweet 178804269456171008 >}}きっとミラクルしばやんのいう通りなのだろうと思うけど、あんまり GC 周りをよく理解していないのと、問題がサードパーティの DLL 側にあるらしいこともあって、対策がうまくいかない。結局**タイマーで定期的にフックが生きているかどうかチェックする**という、若干美しくない手段を取らざるを得なかった。数日これで試して問題がなければ、このままリリースするつもり。

<ul>
<li><a href="http://daruyanagi.hatenablog.com/entry/2012/03/11/001549">SoundKeyboard 2012 を公開しました - だるろぐ</a></li>
</ul>

