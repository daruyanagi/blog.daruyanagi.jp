
+++
date = "2012-09-18 00:22:31 +0000 UTC"
draft = false
title = "メトロっぽいカスタムボタンを XAML で作る"
tags = ["Windows ストア アプリ"]

+++


{{< figure src="/images/20120917231926.png"  >}}

tandardStyles.xaml はお宝の宝庫や！　という話を前回（<a href="https://blog.daruyanagi.jp/entry/2012/09/17/235654">Common フォルダをチラ見してみる - だるろぐ</a>）少しした。たとえば、ボタンなんかはほとんど自分で作る必要がないぐらい、豊富に取り揃えられている。けれど、それでも足りない場合があるかもしれない。おれは足りなかった。<a href="https://blog.daruyanagi.jp/entry/2012/09/17/222920">燃費記録用の Windows ストアアプリを作ってみた - だるろぐ</a> に使う「ガソリン」アイコンのボタンがほしい！　なんでないんだっ？　レドモンドは何をしているっ！そこでふと、死んだじいちゃんの言葉を思い出した。「なければ自分で作れ」。そうだ、じいちゃん。作ってみるよ、おれ！

<div class="section">
    ### まずは偵察
    ```xml
x:Key="FourBarsAppBarButtonStyle"
       TargetType="ButtonBase"
       BasedOn="{StaticResource AppBarButtonStyle}">
    Property="AutomationProperties.AutomationId"
            Value="FourBarsAppBarButton"/>
    Property="AutomationProperties.Name"
            Value="Four Bars"/>
    Property="Content" Value="&amp;#xE1E9;"/>


```これは StandardStyles.xaml で定義されている「バリ4」アイコンのソース。AppBarButtonStyle を継承していて、AutomationProperties.AutomationId、AutomationProperties.Name、Content の3つのプロパティを書き換えているのがわかる。ちなみに、AppBarButtonStyle のコードは読む気が起きなかった。たぶん、Content を丸で囲って、下にテキストを追加する、みたいなことをやっているのだろう。知らんけど。Content は文字の実態参照（っていうんだっけ？）で、AppBarButtonStyle はそれを Segoe UI Symbol で描画しているらしい。へぇ、あのアイコンの絵って、全部フォントだったんだ。AutomationProperties はアイコンの下にでてくるテキストに関係があるみたい。試しに空にしてみたらテキストが消えた。これでだいたい偵察が済んだ。簡単にカスタマイズできそうだ。

</div>
<div class="section">
    ### 適当にカスタマイズしてみる
    

{{< figure src="/images/20120918001039.png"  >}}

ず、文字コード表から目的の文字を探す。あった！　たいていのモノはありそうだな。次に文字コードをもとにさきほどのスタイルをコピペして魔改造する。

{{< figure src="/images/20120918001322.png"  >}}

で、実際にバインドして使ってみる。

{{< figure src="/images/20120918001358.png"  >}}

ークルが、消えている！ (；ﾟДﾟ) ﾅｾﾞﾀﾞ！

{{< figure src="/images/20120918001514.png"  >}}

んか、FlowLayout を RightToLeft にしていると消えてしまうみたい。理由まで調べるのは面倒だったけど、既定通り LeftToRight に戻したらサークルが出た。これを応用したらボタンを腐るほど量産できるな！

</div>
<div class="section">
    ### おまけ
    

{{< figure src="/images/20120918002004.jpg"  >}}

っとボタンがほしければ、こういうのもある。有名ソフトのアイコンまでカバーされていていい感じ。<a href="http://www.forest.impress.co.jp/docs/news/20120809_552162.html">米Syncfusion、“Metro”アイコンの作成ソフト「Metro Studio 2」を正式公開 - 窓の杜</a>

</div>

