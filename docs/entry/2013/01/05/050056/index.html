<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <base href="http://daruyanagi.net/" />
        <link rel="canonical" href="http://daruyanagi.net/entry/2013/01/05/050056/" />

        <meta name="viewport" content="width=device-width,initial-scale=1">

        <title> 
            WebMatrix 2：お正月なのでいつもは書かないことを徒然なるままに | だるやなぎ
        </title>

        

        
            
        

        
            <meta name="description" content="@{ var hello = &#34;Hello!&#34;; } &amp;lt;!DOCTYPE html&gt; &amp;lt;html lang=&#34;ja&#34;&gt; &amp;lt;head&gt; &amp;lt;meta charset=&#34;utf-8&#34; /&gt; &amp;lt;title&gt;マイ サイトのタイトル&amp;lt;/title&gt; &amp;lt;link href=&#34;~/favicon.ico&#34; rel=&#34;shortcut icon&#34; type=&#34;image/x-icon&#34; /&gt; &amp;lt;/head&gt; &amp;lt;body&gt; &amp;lt;p&gt;@hello World!&amp;lt;/p&gt; &amp;lt;/body&gt; &amp;lt;/html&gt; ```これの結果は、当然“Hello! World!”ですね。  さて、Razor 構文で変数を埋め込んだ ```cs &amp;lt;p&gt;@hello World!&amp;lt;/p&gt; ```の部分は、 ```cs &amp;lt;p&gt;@(hello) World!&amp;lt;/p&gt; ```とも書いていい、というか、もともとこの形の省略なんだな（たぶん）。括弧を省略した場合は、スペースや記号（要は C# の変数に使えない文字）、HTML タグの手前で一度区切られ、評価が行われる。だから、もし Hello! と World! の間にスペースを入れたくなければ、@(hello)World! と書いて明示的に括弧で区切りを示さなければならない。じゃないと、@(helloWorld)! と解釈される。@() の内容は、その値が評価され（ToString() だと思えばいい）、無毒化のうえ（つまり HtmlEncode() やな）出力される。逆に言えば、@() の内容は値をもつ変数か関数でなくてはならない。一方、@{} の中には文を記述する。文というのは、要は ; で終わっていたり、{} で囲まれたコードの塊。たとえば、Razor で括弧を省略せずに for 文を書くときは {} が使える。 ```cs &amp;lt;ul&gt; @{ for(int i = 0; i &amp;lt; 10; i&#43;&#43;) { &amp;lt;li&gt;@(i)&amp;lt;/li&gt; } } &amp;lt;/ul&gt; ```わざわざこのように読みにくく書くことはないけど（ひとによってはこっちの方がいいか？）。ちなみに、for や if のあとの {} の中身はまた少し特殊で（だから省略できないんだな……）、@{} 外と同じ感じで評価される。つまり、HTML タグと @() が使える。まぁ、理屈より書いて慣れた方が早い。Don&amp;#39;t think, feel!" />
        

        
        
        <link rel="stylesheet" href="css/style.css">

    </head>
    <body class="body">

        <header class="global-header">
            <h1><a href="/" >だるやなぎ</a></h1>

<p>そうだ、だるだるしよう。</p>


        </header>

        <main>
            
    <article class="entry">

        <div class="entry__header">
            <div class="entry__header-taxonomies">
                
                
                    <div class="entry__header-taxonomies-category">
                        <span class="entry__header-taxonomies-category-title">
                            <a class="entry__header-taxonomies-category-title-link" href="http://daruyanagi.net/entry/">
                                Entries
                            </a>
                        </span>
                    </div>
                
                
                    <div class="entry__header-taxonomies-tags">
                        <ul class="entry__header-taxonomies-tags-list" >
                            
                                
                                
                                    <li class="entry__header-taxonomies-tags-list-item">
                                        <a class="entry__header-taxonomies-tags-list-itelink" href="http://daruyanagi.net/tags/asp.net-web-pages/">ASP.net Web Pages</a>
                                    </li>
                                
                            
                                
                                
                                    <li class="entry__header-taxonomies-tags-list-item">
                                        <a class="entry__header-taxonomies-tags-list-itelink" href="http://daruyanagi.net/tags/webmatrix/">WebMatrix</a>
                                    </li>
                                
                            
                        </ul>
                    </div>
                
            </div>

            <div class="entry__header-title">
                <a class="entry__header-title-link" href="http://daruyanagi.net/entry/2013/01/05/050056/" >
                    <h1 class="entry__header-title-link-text">WebMatrix 2：お正月なのでいつもは書かないことを徒然なるままに</h1>
                </a>
            </div>

            <div class="entry__header-date">
                <P>公開日：<time>2013/01/05</time>
                </P>
            </div>

        </div>
        <div class="entry__content">
            <figure>
    <img src="/images/2013/01/05/050056/20130105035445.png"/> 
</figure>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cs" data-lang="cs"><span style="color:#960050;background-color:#1e0010">@</span>{
    <span style="color:#66d9ef">var</span> hello = <span style="color:#e6db74">&#34;Hello!&#34;</span>;
}

&amp;lt;!DOCTYPE html&gt;

&amp;lt;html lang=<span style="color:#e6db74">&#34;ja&#34;</span>&gt;
    &amp;lt;head&gt;
        &amp;lt;meta charset=<span style="color:#e6db74">&#34;utf-8&#34;</span> /&gt;
        &amp;lt;title&gt;<span style="color:#960050;background-color:#1e0010">マイ</span> <span style="color:#960050;background-color:#1e0010">サイトのタイトル</span>&amp;lt;/title&gt;
        &amp;lt;link href=<span style="color:#e6db74">&#34;~/favicon.ico&#34;</span> rel=<span style="color:#e6db74">&#34;shortcut icon&#34;</span> type=<span style="color:#e6db74">&#34;image/x-icon&#34;</span> /&gt;
    &amp;lt;/head&gt;
    &amp;lt;body&gt;
        &amp;lt;p&gt;@hello World!&amp;lt;/p&gt;
    &amp;lt;/body&gt;
&amp;lt;/html&gt;

<span style="color:#960050;background-color:#1e0010">```これの結果は、当然“</span>Hello! World!<span style="color:#960050;background-color:#1e0010">”ですね。</span><figure>
    <img src="/images/2013/01/05/050056/20130105035453.png"/> 
</figure>
さて<span style="color:#960050;background-color:#1e0010">、</span>Razor <span style="color:#960050;background-color:#1e0010">構文で変数を埋め込んだ</span>
<span style="color:#960050;background-color:#1e0010">```</span>cs
&amp;lt;p&gt;@hello World!&amp;lt;/p&gt;

<span style="color:#960050;background-color:#1e0010">```の部分は、</span>
<span style="color:#960050;background-color:#1e0010">```</span>cs
&amp;lt;p&gt;<span style="color:#960050;background-color:#1e0010">@</span>(hello) World!&amp;lt;/p&gt;

<span style="color:#960050;background-color:#1e0010">```とも書いていい、というか、もともとこの形の省略なんだな（たぶん）。括弧を省略した場合は、スペースや記号（要は</span> C<span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#960050;background-color:#1e0010">の変数に使えない文字）、</span>HTML <span style="color:#960050;background-color:#1e0010">タグの手前で一度区切られ、評価が行われる。だから、もし</span> Hello! <span style="color:#960050;background-color:#1e0010">と</span> World! <span style="color:#960050;background-color:#1e0010">の間にスペースを入れたくなければ、@</span>(hello)World! <span style="color:#960050;background-color:#1e0010">と書いて明示的に括弧で区切りを示さなければならない。じゃないと、@</span>(helloWorld)! <span style="color:#960050;background-color:#1e0010">と解釈される。@</span>() <span style="color:#960050;background-color:#1e0010">の内容は、その値が評価され（</span>ToString() <span style="color:#960050;background-color:#1e0010">だと思えばいい）、無毒化のうえ（つまり</span> HtmlEncode() <span style="color:#960050;background-color:#1e0010">やな）出力される。逆に言えば、@</span>() <span style="color:#960050;background-color:#1e0010">の内容は値をもつ変数か関数でなくてはならない。一方、@</span>{} <span style="color:#960050;background-color:#1e0010">の中には文を記述する。文というのは、要は</span> ; <span style="color:#960050;background-color:#1e0010">で終わっていたり、</span>{} <span style="color:#960050;background-color:#1e0010">で囲まれたコードの塊。たとえば、</span>Razor <span style="color:#960050;background-color:#1e0010">で括弧を省略せずに</span> <span style="color:#66d9ef">for</span> <span style="color:#960050;background-color:#1e0010">文を書くときは</span> {} <span style="color:#960050;background-color:#1e0010">が使える。</span>
<span style="color:#960050;background-color:#1e0010">```</span>cs
&amp;lt;ul&gt;
<span style="color:#960050;background-color:#1e0010">@</span>{
    <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">0</span>; i &amp;lt; <span style="color:#ae81ff">10</span>; i++)
    {
        &amp;lt;li&gt;<span style="color:#960050;background-color:#1e0010">@</span>(i)&amp;lt;/li&gt;
    }
}        
&amp;lt;/ul&gt;

<span style="color:#960050;background-color:#1e0010">```わざわざこのように読みにくく書くことはないけど（ひとによってはこっちの方がいいか？）。ちなみに、</span><span style="color:#66d9ef">for</span> <span style="color:#960050;background-color:#1e0010">や</span> <span style="color:#66d9ef">if</span> <span style="color:#960050;background-color:#1e0010">のあとの</span> {} <span style="color:#960050;background-color:#1e0010">の中身はまた少し特殊で（だから省略できないんだな……）、@</span>{} <span style="color:#960050;background-color:#1e0010">外と同じ感じで評価される。つまり、</span>HTML <span style="color:#960050;background-color:#1e0010">タグと</span> <span style="color:#960050;background-color:#1e0010">@</span>() <span style="color:#960050;background-color:#1e0010">が使える。まぁ、理屈より書いて慣れた方が早い。</span>Don&amp;<span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">39</span>;t think, feel!<span style="color:#960050;background-color:#1e0010">さてはて。では、冒頭のコードで</span> <span style="color:#960050;background-color:#1e0010">@</span>(hello) <span style="color:#960050;background-color:#1e0010">の代わりに</span> <span style="color:#960050;background-color:#1e0010">@</span>{hello} <span style="color:#960050;background-color:#1e0010">を使うとどうなるでしょうか。</span>
</code></pre></div><p>&lt;p&gt;@{hello} World!&lt;/p&gt;</p>
<pre><code class="language-@{}" data-lang="@{}">```cs
namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using System.Web.WebPages.Html;
    using WebMatrix.Data;
    using WebMatrix.WebData;
    
    
    public class _Page_Default_cshtml : System.Web.WebPages.WebPage
    {
#line hidden
        public _Page_Default_cshtml()
        {
        }
        
        protected System.Web.HttpApplication ApplicationInstance
        {
            get {
                return ((System.Web.HttpApplication)(Context.ApplicationInstance));
            }
        }
        
        public override void Execute()
        {    
#line 1 &quot;C:\Users\Hidetoshi Yanagi\Documents\My Web Sites\空のサイト\Default.cshtml&quot;
            var hello = &quot;Hello!&quot;;
#line default
#line hidden

            BeginContext(&quot;~/Default.cshtml&quot;, 32, 28, true);
            WriteLiteral(&quot;\r\n\r\n\r\n\r\n);
            EndContext(&quot;~/Default.cshtml&quot;, 32, 28, true);

            ：

            BeginContext(&quot;~/Default.cshtml&quot;, 271, 5, false);
#line 14 &quot;C:\Users\Hidetoshi Yanagi\Documents\My Web Sites\空のサイト\Default.cshtml&quot;
            Write(hello);
#line default
#line hidden
            EndContext(&quot;~/Default.cshtml&quot;, 271, 5, false);

            BeginContext(&quot;~/Default.cshtml&quot;, 276, 35, true);
            WriteLiteral(&quot; World!&lt;p&gt;&lt;/p&gt;\r\n    \r\n\r\n&quot;);
            EndContext(&quot;~/Default.cshtml&quot;, 276, 35, true);
        }
    }
}

```Razor 構文で記述した部分が、まるごと &lt;a href=&quot;http://msdn.microsoft.com/ja-jp/library/system.web.webpages.webpageexecutingbase.execute(v=vs.111).aspx&quot;&gt;WebPageExecutingBase.Execute メソッド (System.Web.WebPages)&lt;/a&gt; になるのですね。@{} 内はそのまま、@() は BeginContext()～Write()～EndContext()、そのほかの HTML タグなどは BeginContext()～WriteLiteral() ～EndContext()で逐次書き込まれる感じ。もっと Razor について知りたい人は、@shibayan にでも聞けばいいんじゃないかない。万世の屋上でも奢ればしゃべってくれると思うよ。


</code></pre>
        </div>
        <div class="entry__footer">
            <div class="entry__footer-date">
                
                更新日：<time
                    datetime="2013-01-05T05:00:56JST">2013/01/05</time>
                
                </P>
            </div>

            <div class="entry__footer-buttons">
                
                <span class="entry__footer-share">
                    
                    
                        
                    
                    
                    <ul>
                        
                        <li><a class="entry__footer-sns-buttons-icon-hatebu" href="https://b.hatena.ne.jp/my/add.confirm?title=WebMatrix&#43;2%EF%BC%9A%E3%81%8A%E6%AD%A3%E6%9C%88%E3%81%AA%E3%81%AE%E3%81%A7%E3%81%84%E3%81%A4%E3%82%82%E3%81%AF%E6%9B%B8%E3%81%8B%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8%E3%82%92%E5%BE%92%E7%84%B6%E3%81%AA%E3%82%8B%E3%81%BE%E3%81%BE%E3%81%AB&#43;%7C&#43;%E3%81%A0%E3%82%8B%E3%82%84%E3%81%AA%E3%81%8E&amp;url=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2013%2F01%2F05%2F050056%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-hatebu">hatena</i>
                        </a></li>
                        
                        <li><a class="entry__footer-sns-buttons-icon" href="https://twitter.com/intent/tweet?text=WebMatrix&#43;2%EF%BC%9A%E3%81%8A%E6%AD%A3%E6%9C%88%E3%81%AA%E3%81%AE%E3%81%A7%E3%81%84%E3%81%A4%E3%82%82%E3%81%AF%E6%9B%B8%E3%81%8B%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8%E3%82%92%E5%BE%92%E7%84%B6%E3%81%AA%E3%82%8B%E3%81%BE%E3%81%BE%E3%81%AB&#43;%7C&#43;%E3%81%A0%E3%82%8B%E3%82%84%E3%81%AA%E3%81%8E&amp;url=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2013%2F01%2F05%2F050056%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-twitter">twitter</i>
                        </a></li>
                        
                        <li><a class="entry__footer-sns-buttons-icon" href="https://www.facebook.com/sharer.php?u=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2013%2F01%2F05%2F050056%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-facebook">facebook</i>
                        </a></li>
                        
                        <li><a class="entry__footer-sns-buttons-icon" href="https://getpocket.com/edit?title=WebMatrix&#43;2%EF%BC%9A%E3%81%8A%E6%AD%A3%E6%9C%88%E3%81%AA%E3%81%AE%E3%81%A7%E3%81%84%E3%81%A4%E3%82%82%E3%81%AF%E6%9B%B8%E3%81%8B%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8%E3%82%92%E5%BE%92%E7%84%B6%E3%81%AA%E3%82%8B%E3%81%BE%E3%81%BE%E3%81%AB&#43;%7C&#43;%E3%81%A0%E3%82%8B%E3%82%84%E3%81%AA%E3%81%8E&amp;url=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2013%2F01%2F05%2F050056%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-get-pocket">pocket</i>
                        </a></li>
                        <li><a class="entry__footer-sns-buttons-icon" href="https://line.me/R/msg/text/?WebMatrix%202%ef%bc%9a%e3%81%8a%e6%ad%a3%e6%9c%88%e3%81%aa%e3%81%ae%e3%81%a7%e3%81%84%e3%81%a4%e3%82%82%e3%81%af%e6%9b%b8%e3%81%8b%e3%81%aa%e3%81%84%e3%81%93%e3%81%a8%e3%82%92%e5%be%92%e7%84%b6%e3%81%aa%e3%82%8b%e3%81%be%e3%81%be%e3%81%ab%20%7c%20%e3%81%a0%e3%82%8b%e3%82%84%e3%81%aa%e3%81%8e http://daruyanagi.net/entry/2013/01/05/050056/" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-line">line</i>
                        </a></li>
                        
                        <li><a class="entry__footer-sns-buttons-icon" href="https://www.reddit.com/submit?title=WebMatrix&#43;2%EF%BC%9A%E3%81%8A%E6%AD%A3%E6%9C%88%E3%81%AA%E3%81%AE%E3%81%A7%E3%81%84%E3%81%A4%E3%82%82%E3%81%AF%E6%9B%B8%E3%81%8B%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8%E3%82%92%E5%BE%92%E7%84%B6%E3%81%AA%E3%82%8B%E3%81%BE%E3%81%BE%E3%81%AB&#43;%7C&#43;%E3%81%A0%E3%82%8B%E3%82%84%E3%81%AA%E3%81%8E&amp;url=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2013%2F01%2F05%2F050056%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-reddit">reddit</i>
                        </a></li>
                        
                        <li><a class="entry__footer-sns-buttons-icon" href="https://www.linkedin.com/shareArticle?mini=true&amp;title=WebMatrix&#43;2%EF%BC%9A%E3%81%8A%E6%AD%A3%E6%9C%88%E3%81%AA%E3%81%AE%E3%81%A7%E3%81%84%E3%81%A4%E3%82%82%E3%81%AF%E6%9B%B8%E3%81%8B%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8%E3%82%92%E5%BE%92%E7%84%B6%E3%81%AA%E3%82%8B%E3%81%BE%E3%81%BE%E3%81%AB&#43;%7C&#43;%E3%81%A0%E3%82%8B%E3%82%84%E3%81%AA%E3%81%8E&amp;url=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2013%2F01%2F05%2F050056%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-linkedin-in">linkedin</i>
                        </a></li>
                        
                        <li><a class="entry__footer-sns-buttons-icon" href="https://pinboard.in/popup_login/?title=WebMatrix&#43;2%EF%BC%9A%E3%81%8A%E6%AD%A3%E6%9C%88%E3%81%AA%E3%81%AE%E3%81%A7%E3%81%84%E3%81%A4%E3%82%82%E3%81%AF%E6%9B%B8%E3%81%8B%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8%E3%82%92%E5%BE%92%E7%84%B6%E3%81%AA%E3%82%8B%E3%81%BE%E3%81%BE%E3%81%AB&#43;%7C&#43;%E3%81%A0%E3%82%8B%E3%82%84%E3%81%AA%E3%81%8E&amp;url=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2013%2F01%2F05%2F050056%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fas fa-thumbtack">pinboard</i>
                        </a></li>
                    </ul>
                </span>
            </div>
            
            <div class="entry__footer-buttons">
                <span class="entry__footer-prev">
                     <a class="entry__page-navigation-link" href="http://daruyanagi.net/entry/2013/01/06/051815/">&laquo; prev</a> 
                </span>
                <span class="entry__footer-next">
                     <a class="entry__page-navigation-link" href="http://daruyanagi.net/entry/2013/01/05/002415/">次 &raquo; </a> 
                </span>
            </div>
        </div>

    </article>

        </main>

        <footer class="global-footer">
            <p>&copy; 2020 daruyanagi.</p>

        </footer>
    </body>
</html>