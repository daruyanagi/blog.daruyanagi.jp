<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <base href="http://daruyanagi.net/" />
        <link rel="canonical" href="http://daruyanagi.net/entry/2012/09/17/222920/" />

        <meta name="viewport" content="width=device-width,initial-scale=1">

        <title> 
            燃費記録用の Windows ストアアプリを作ってみた | だるやなぎ
        </title>

        

        
            
        

        
            <meta name="description" content="昔、Windows Phone 向けに作っていた燃費記録アプリを Windows ストアアプリに移植してみた。移植といっても、コードの共通部分はほとんどないけれど……というのも、移植元のコードが腐ってた（ぁ丸二日ぐらい格闘していたのだけれど、ぶっちゃけ疲れた。
 ライブラリがいろいろ足りない。ファイルベースのデータベースすらない*1 サンプルがてら開いてみたテンプレのコード量に挫折しそう*2 WPF/Silverlight と微妙に違うところに足をすくわれる（まぁ、WinRT だし） XAML に慣れてない＆タイプミスでバインディングがうまくいかず悩みまくり いろいろなレイアウトに対応しなきゃいけない とくに最後は素人には酷で、スナップしたときのデザインがボロボロなのを、ここまで治すのに3時間ぐらいかかった。しかも、テンプレートをよく読んでみると、もっとエレガントな方法があるらしい*3。Windows ストアアプリで情報発信している人までは追い切れていないけれど、全体的に情報量が少なくてかなりきつかった。だったら自分で書けよ！　って感じなのだけれど、書くためにはその何倍も理解してなきゃダメなんだよ、コンチクショウ！でも、まぁ、ここまでできて妙な達成感はあった（ぉ一つの収穫は M-VM-V を意識したプログラミングの長所を実感できたところ。ちゃんと M-VM を作っておけば、V の変更がとても簡単になり、かつ M への影響を（理想的には）ゼロにすることができる。VM ちゃんと作っておけば、必要な時に適当にプロパティ作ってバインディングしてもモデルが汚れないのだな！2012-09-17 12:14:12 via MetroTwit @daruyanagi さーいえっさー！2012-09-17 12:15:04 via Krile2 to @daruyanagiMVVM 星人の言ってたこと、やっと少しだけわかったよ ( ｀ー´)ノ年内にはカタチにできそうだけれど、今月中のストア提出はあきらめムードだなぁ。だれだよ、Windows ストアアプリは簡単に作れるとか言ったの。 *1:いくつか試してみたけど動かなかったり…… *2:あとになってみると、それほどたいそうなことをしていないのがわかった *3:ViewState というのがわからない  " />
        

        
        
        <link rel="stylesheet" href="css/style.css">

    </head>
    <body class="body">

        <header class="global-header">
            <h1><a href="/" >だるやなぎ</a></h1>

<p>そうだ、だるだるしよう。</p>


        </header>

        <main>
            
    <article class="entry">

        <div class="entry__header">
            <div class="entry__header-taxonomies">
                
                
                    <div class="entry__header-taxonomies-category">
                        <span class="entry__header-taxonomies-category-title">
                            <a class="entry__header-taxonomies-category-title-link" href="http://daruyanagi.net/entry/">
                                Entries
                            </a>
                        </span>
                    </div>
                
                
                    <div class="entry__header-taxonomies-tags">
                        <ul class="entry__header-taxonomies-tags-list" >
                            
                                
                                
                                    <li class="entry__header-taxonomies-tags-list-item">
                                        <a class="entry__header-taxonomies-tags-list-itelink" href="http://daruyanagi.net/tags/windows/">Windows ストア アプリ</a>
                                    </li>
                                
                            
                        </ul>
                    </div>
                
            </div>

            <div class="entry__header-title">
                <a class="entry__header-title-link" href="http://daruyanagi.net/entry/2012/09/17/222920/" >
                    <h1 class="entry__header-title-link-text">燃費記録用の Windows ストアアプリを作ってみた</h1>
                </a>
            </div>

            <div class="entry__header-date">
                <P>公開日：<time>2012/09/17</time>
                </P>
            </div>

        </div>
        <div class="entry__content">
            <p><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120917/20120917215840.png" alt="f:id:daruyanagi:20120917215840p:plain" title="f:id:daruyanagi:20120917215840p:plain" class="hatena-fotolife"/>昔、Windows Phone 向けに作っていた燃費記録アプリを Windows ストアアプリに移植してみた。移植といっても、コードの共通部分はほとんどないけれど……というのも、移植元のコードが腐ってた（ぁ丸二日ぐらい格闘していたのだけれど、ぶっちゃけ疲れた。</p>
<ul>
<li>ライブラリがいろいろ足りない。ファイルベースのデータベースすらない<a href="#f1" name="fn1" title="いくつか試してみたけど動かなかったり……">*1</a></li>
<li>サンプルがてら開いてみたテンプレのコード量に挫折しそう<a href="#f2" name="fn2" title="あとになってみると、それほどたいそうなことをしていないのがわかった">*2</a></li>
<li>WPF/Silverlight と微妙に違うところに足をすくわれる（まぁ、WinRT だし）</li>
<li>XAML に慣れてない＆タイプミスでバインディングがうまくいかず悩みまくり</li>
<li>いろいろなレイアウトに対応しなきゃいけない</li>
</ul>とくに最後は素人には酷で、<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120917/20120917220217.png" alt="f:id:daruyanagi:20120917220217p:plain" title="f:id:daruyanagi:20120917220217p:plain" class="hatena-fotolife"/>スナップしたときのデザインがボロボロなのを、<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120917/20120917220222.png" alt="f:id:daruyanagi:20120917220222p:plain" title="f:id:daruyanagi:20120917220222p:plain" class="hatena-fotolife"/>ここまで治すのに3時間ぐらいかかった。しかも、テンプレートをよく読んでみると、もっとエレガントな方法があるらしい<a href="#f3" name="fn3" title="ViewState というのがわからない">*3</a>。Windows ストアアプリで情報発信している人までは追い切れていないけれど、全体的に情報量が少なくてかなりきつかった。だったら自分で書けよ！　って感じなのだけれど、書くためにはその何倍も理解してなきゃダメなんだよ、コンチクショウ！<img src="http://cdn-ak.f.st-hatena.com/images/fotolife/d/daruyanagi/20120917/20120917222754.png" alt="f:id:daruyanagi:20120917222754p:plain" title="f:id:daruyanagi:20120917222754p:plain" class="hatena-fotolife"/>でも、まぁ、ここまでできて妙な達成感はあった（ぉ一つの収穫は M-VM-V を意識したプログラミングの長所を実感できたところ。ちゃんと M-VM を作っておけば、V の変更がとても簡単になり、かつ M への影響を（理想的には）ゼロにすることができる。<div class="twitter-detail twitter-detail-left"><div class="twitter-detail-user"><a class="twitter-user-screen-name" href="http://twitter.com/daruyanagi"><img src="http://a0.twimg.com/profile_images/2605393123/l1prcrlo9y1oqshk9ktd_normal.jpeg" alt="daruyanagi" height="48" width="48"/></a></div><div class="twitter-detail-tweet">      VM ちゃんと作っておけば、必要な時に適当にプロパティ作ってバインディングしてもモデルが汚れないのだな！<a href="http://twitter.com/daruyanagi/status/247533888572911616" class="twitter-detail-info-permalink"><span class="twitter-detail-info-date">2012-09-17</span> <span class="twitter-detail-info-time">12:14:12</span></a> <span class="twitter-detail-info-source">via <a href="http://www.metrotwit.com/" rel="nofollow">MetroTwit</a></span></div></div><br/>
<div class="twitter-detail twitter-detail-left"><div class="twitter-detail-user"><a class="twitter-user-screen-name" href="http://twitter.com/ugaya40"><img src="http://a0.twimg.com/profile_images/2583339428/65e01d13-db8f-41f3-b27d-6d3e2e14f0df_normal.png" alt="ugaya40" height="48" width="48"/></a></div><div class="twitter-detail-tweet">      @<a class="twitter-user-screen-name" href="http://twitter.com/daruyanagi" target="_top">daruyanagi</a> さーいえっさー！<a href="http://twitter.com/ugaya40/status/247534106848673792" class="twitter-detail-info-permalink"><span class="twitter-detail-info-date">2012-09-17</span> <span class="twitter-detail-info-time">12:15:04</span></a> <span class="twitter-detail-info-source">via <a href="http://krile2.starwing.net/" rel="nofollow">Krile2</a></span> to @<a href="http://twitter.com/daruyanagi/status/247533888572911616" class="twitter-user-screen-name">daruyanagi</a></div></div>MVVM 星人の言ってたこと、やっと少しだけわかったよ ( ｀ー´)ノ年内にはカタチにできそうだけれど、今月中のストア提出はあきらめムードだなぁ。だれだよ、Windows ストアアプリは簡単に作れるとか言ったの。
<div class="footnote">
<a href="#fn1" name="f1" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">いくつか試してみたけど動かなかったり……</span>
<a href="#fn2" name="f2" class="footnote-number">*2</a><span class="footnote-delimiter">:</span><span class="footnote-text">あとになってみると、それほどたいそうなことをしていないのがわかった</span>
<a href="#fn3" name="f3" class="footnote-number">*3</a><span class="footnote-delimiter">:</span><span class="footnote-text">ViewState というのがわからない</span>
</div>

        </div>
        <div class="entry__footer">
            <div class="entry__footer-date">
                
                更新日：<time
                    datetime="2012-09-17T22:29:20JST">2012/09/17</time>
                
                </P>
            </div>

            <div class="entry__footer-buttons">
                
                <span class="entry__footer-share">
                    
                    
                        
                    
                    
                    <ul>
                        
                        <li><a class="entry__footer-sns-buttons-icon-hatebu" href="https://b.hatena.ne.jp/my/add.confirm?title=%E7%87%83%E8%B2%BB%E8%A8%98%E9%8C%B2%E7%94%A8%E3%81%AE&#43;Windows&#43;%E3%82%B9%E3%83%88%E3%82%A2%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F&#43;%7C&#43;%E3%81%A0%E3%82%8B%E3%82%84%E3%81%AA%E3%81%8E&amp;url=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2012%2F09%2F17%2F222920%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-hatebu">hatena</i>
                        </a></li>
                        
                        <li><a class="entry__footer-sns-buttons-icon" href="https://twitter.com/intent/tweet?text=%E7%87%83%E8%B2%BB%E8%A8%98%E9%8C%B2%E7%94%A8%E3%81%AE&#43;Windows&#43;%E3%82%B9%E3%83%88%E3%82%A2%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F&#43;%7C&#43;%E3%81%A0%E3%82%8B%E3%82%84%E3%81%AA%E3%81%8E&amp;url=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2012%2F09%2F17%2F222920%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-twitter">twitter</i>
                        </a></li>
                        
                        <li><a class="entry__footer-sns-buttons-icon" href="https://www.facebook.com/sharer.php?u=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2012%2F09%2F17%2F222920%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-facebook">facebook</i>
                        </a></li>
                        
                        <li><a class="entry__footer-sns-buttons-icon" href="https://getpocket.com/edit?title=%E7%87%83%E8%B2%BB%E8%A8%98%E9%8C%B2%E7%94%A8%E3%81%AE&#43;Windows&#43;%E3%82%B9%E3%83%88%E3%82%A2%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F&#43;%7C&#43;%E3%81%A0%E3%82%8B%E3%82%84%E3%81%AA%E3%81%8E&amp;url=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2012%2F09%2F17%2F222920%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-get-pocket">pocket</i>
                        </a></li>
                        <li><a class="entry__footer-sns-buttons-icon" href="https://line.me/R/msg/text/?%e7%87%83%e8%b2%bb%e8%a8%98%e9%8c%b2%e7%94%a8%e3%81%ae%20Windows%20%e3%82%b9%e3%83%88%e3%82%a2%e3%82%a2%e3%83%97%e3%83%aa%e3%82%92%e4%bd%9c%e3%81%a3%e3%81%a6%e3%81%bf%e3%81%9f%20%7c%20%e3%81%a0%e3%82%8b%e3%82%84%e3%81%aa%e3%81%8e http://daruyanagi.net/entry/2012/09/17/222920/" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-line">line</i>
                        </a></li>
                        
                        <li><a class="entry__footer-sns-buttons-icon" href="https://www.reddit.com/submit?title=%E7%87%83%E8%B2%BB%E8%A8%98%E9%8C%B2%E7%94%A8%E3%81%AE&#43;Windows&#43;%E3%82%B9%E3%83%88%E3%82%A2%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F&#43;%7C&#43;%E3%81%A0%E3%82%8B%E3%82%84%E3%81%AA%E3%81%8E&amp;url=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2012%2F09%2F17%2F222920%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-reddit">reddit</i>
                        </a></li>
                        
                        <li><a class="entry__footer-sns-buttons-icon" href="https://www.linkedin.com/shareArticle?mini=true&amp;title=%E7%87%83%E8%B2%BB%E8%A8%98%E9%8C%B2%E7%94%A8%E3%81%AE&#43;Windows&#43;%E3%82%B9%E3%83%88%E3%82%A2%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F&#43;%7C&#43;%E3%81%A0%E3%82%8B%E3%82%84%E3%81%AA%E3%81%8E&amp;url=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2012%2F09%2F17%2F222920%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-linkedin-in">linkedin</i>
                        </a></li>
                        
                        <li><a class="entry__footer-sns-buttons-icon" href="https://pinboard.in/popup_login/?title=%E7%87%83%E8%B2%BB%E8%A8%98%E9%8C%B2%E7%94%A8%E3%81%AE&#43;Windows&#43;%E3%82%B9%E3%83%88%E3%82%A2%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F&#43;%7C&#43;%E3%81%A0%E3%82%8B%E3%82%84%E3%81%AA%E3%81%8E&amp;url=http%3A%2F%2Fdaruyanagi.net%2Fentry%2F2012%2F09%2F17%2F222920%2F" target="_blank" rel="noopener noreferrer">
                            <i class="fas fa-thumbtack">pinboard</i>
                        </a></li>
                    </ul>
                </span>
            </div>
            
            <div class="entry__footer-buttons">
                <span class="entry__footer-prev">
                     <a class="entry__page-navigation-link" href="http://daruyanagi.net/entry/2012/09/17/235654/">&laquo; prev</a> 
                </span>
                <span class="entry__footer-next">
                     <a class="entry__page-navigation-link" href="http://daruyanagi.net/entry/2012/09/16/001625/">次 &raquo; </a> 
                </span>
            </div>
        </div>

    </article>

        </main>

        <footer class="global-footer">
            <p>&copy; 2020 daruyanagi.</p>

        </footer>
    </body>
</html>