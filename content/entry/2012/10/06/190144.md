
+++
date = "2012-10-06 19:01:44 +0000 UTC"
draft = false
title = "よい子はマネしちゃいけないデモを真似してみた"
tags = ["ASP.net Web Pages"]

+++
<a href="https://blog.daruyanagi.jp/entry/2012/10/04/221735">Developer Camp 2012 Japan Fall に参加してきました！（1日目） - だるろぐ</a> でやってたデモを真似してみた。
```cs
# Default.cshtml

@using System.IO
@using System.Diagnostics

@{
    // 結果を出力するファイルのパスを決める
    var path = HttpContext.Current.Server.MapPath("~/result.txt");

    // dir c:\ > result.txt を実行（ /c は実行して終了するオプション）
    Process.Start("cmd", @"/c dir c:\ > " + path).WaitForExit();

    // result.txt　を読み込む
    var result = File.ReadAllText(path);
}

&lt;!DOCTYPE html>

&lt;html lang="ja">
    &lt;head>
        &lt;meta charset="utf-8" />
        &lt;title>マイ サイトのタイトル&lt;/title>
        &lt;link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    &lt;/head>
    &lt;body>
        &lt;pre>&lt;code style="font-family: Consolas, monospace;">
            @result
        &lt;/code>&lt;/pre>
    &lt;/body>
&lt;/html>

```{{< figure src="/images/20121006184303.png"  >}}わぉ！　サーバーの C ドライブ直下の内容がみえてる！　これをああしたりこうしたりすれば ruby が動いちゃったりするのか（ゲフンゲフンでも、よい子は真似しないように。実際のデモでは WaitForExit() をし忘れて result.txt が読めなくなるなんてハプニングがあったけど、こういうことをやり続ければいずれサーバーが不安定になるよね（知らんけど）。少なくとも、Free/Share ではあんまりやらないほうがいいんだろう。Reserved が使えるお金持ちだけやれ。ちなみに、帝国兵のひとは App_Code フォルダが好きだということでそこにクラスを書いていたけれど、今回はそのままだと面白くないかなと思ったので Default.cshtml に書いてある。わしも App_Code フォルダ大好き。結構いろんなところで使えて便利なんだよね。

<ul>
<li><a href="https://blog.daruyanagi.jp/entry/2012/09/27/213159">SignalR + WebMatrix でサーバーフォルダの監視を行ってみる - だるろぐ</a></li>
<li><a href="https://blog.daruyanagi.jp/entry/2012/08/31/031730">SignalR Deep Dive ! に参加してきた＋WebMatrix で SignalR 動かしてみた - だるろぐ</a></li>
<li><a href="https://blog.daruyanagi.jp/entry/2012/08/30/040609">寄り道： Rails の Flash っぽい機能を WebMatrix で使いたい（2） ―― @helper と @functions とわたし - だるろぐ</a></li>
<li><a href="https://blog.daruyanagi.jp/entry/2012/08/16/182105">App_Code でサブフォルダーを利用する - だるろぐ</a></li>
</ul>使いこなしていきたいところ。

<div class="section">
    ### ついでに（1） ―― ローカルで実行した場合
    {{< figure src="/images/20121006184549.png"  >}}dir c:\ > result.txt の時点でコケるみたい。きっと権限の問題なんだろうな。

</div>
<div class="section">
    ### ついでに（2） ―― ファイル、読んでみたくなるよね？
    {{< figure src="/images/20121006184938.png"  >}}試しに C:\eula.1028.txt を読んでみようと思ったけど失敗した。まぁ、そうだろうな。

</div>

