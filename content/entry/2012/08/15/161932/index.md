---
date: 2012-08-15T16:19:32.0000000
draft: false
title: "WebMatrix で LESS を使おう！"
tags: ["ASP.net Web Pages", "WebMatrix"]
eyecatch: 
---

<blockquote>
<p><b>LESS</b> は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%BF%A5%A4%A5%EB%A5%B7%A1%BC%A5%C8">スタイルシート</a>で variables、mixins、operations、functions などを使えるように拡張した“The dynamic stylesheet language”です。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>は“.less”ファイルに記述し、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%D1%A5%A4%A5%E9">コンパイラ</a>で“.<a class="keyword" href="http://d.hatena.ne.jp/keyword/css">css</a>”へ変換して利用します。変換はサーバーサイドだけでなく、 <a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a> を利用してクライアントサイドで行うことも可能<a href="#f1" name="fn1" title="「WebMatrix 2」は開発時コンパイルなのでサーバーにもクライアントにも負荷をかけないぞ！">*1</a>。結局、何が言いたいかというと、大規模な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%BF%A5%A4%A5%EB%A5%B7%A1%BC%A5%C8">スタイルシート</a>を書く場合にあるとかんなり便利です。</p>

</blockquote>
<p>「<a class="keyword" href="http://d.hatena.ne.jp/keyword/WebMatrix">WebMatrix</a> 2」ではこの LESS が簡単に使えるんですよネ。</p><p>まずは、［<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B3%C8%C4%A5%B5%A1%C7%BD">拡張機能</a>］ボタンから「OrangeBits Compiler」をインストール。</p><p><img src="20120815155123.png" alt="f:id:daruyanagi:20120815155123p:plain" title="f:id:daruyanagi:20120815155123p:plain" class="hatena-fotolife"></p><p>あんまり関係ないけれど、［<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B3%C8%C4%A5%B5%A1%C7%BD">拡張機能</a>］と［NuGet］は最初ちょっと混乱してしまうかもしれない。でもとりあえず、</p>

<ul>
<li>［<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B3%C8%C4%A5%B5%A1%C7%BD">拡張機能</a>］：「<a class="keyword" href="http://d.hatena.ne.jp/keyword/WebMatrix">WebMatrix</a> 2」そのものをパワーアップ</li>
<li>［NuGet］：「<a class="keyword" href="http://d.hatena.ne.jp/keyword/WebMatrix">WebMatrix</a> 2」で編集している“プロジェクト”を簡単に拡張</li>
</ul><p>という感じでとらえておけばいいと思う。</p>

<div class="section">
<h3>.less ファイルを記述</h3>
<pre class="code lang-css" data-lang="css" data-unlink># Sample<span class="synSpecial">.</span>less

@theme-color: blue;

<span class="synStatement">body</span> <span class="synIdentifier">{</span>
<span class="synType">background-color</span>: @theme-<span class="synType">color</span>;
<span class="synIdentifier">}</span>
</pre><p>まずはこんな感じで .less ファイルを記述。変数（variables）が使えるので、テーマカラーの一括変更なんかが簡単に行える。</p><p><img src="20120815155557.png" alt="f:id:daruyanagi:20120815155557p:plain" title="f:id:daruyanagi:20120815155557p:plain" class="hatena-fotolife"></p><p>変数の入力補完が使えるのも便利！　</p><p></p>

</div>
<div class="section">
<h3>.<a class="keyword" href="http://d.hatena.ne.jp/keyword/css">css</a> ファイルへの自動コンパイル</h3>
<p>“Sample.less”を記述すると“Sample.<a class="keyword" href="http://d.hatena.ne.jp/keyword/css">css</a>”が自動生成されるので、その中身を見てみよう。</p><p><img src="20120815160117.png" alt="f:id:daruyanagi:20120815160117p:plain" title="f:id:daruyanagi:20120815160117p:plain" class="hatena-fotolife"></p><p>ちゃんと @theme-color 変数が blue に置き換えられているのがわかる。</p>
<pre class="code lang-css" data-lang="css" data-unlink><span class="synComment">/* -------------------------------------------------------------------------</span>
<span class="synComment"> * !!! AUTOMATICALLY GENERATED CODE !!!</span>
<span class="synComment"> * -------------------------------------------------------------------------</span>
<span class="synComment"> * This file was automatically generated by the OrangeBits compiler.  </span>
<span class="synComment"> * Compiled on:  2012/08/15 15:28:59</span>
<span class="synComment"> * Compiled by: pc-yanagi-main\Hidetoshi Yanagi</span>
<span class="synComment"> * Source: C:\Users\Hidetoshi Yanagi\Documents\My Web Sites\Template\Themes\Default\Styles\Sample.less      </span>
<span class="synComment"> * -------------------------------------------------------------------------*/</span>


<span class="synStatement">body</span> <span class="synIdentifier">{</span>
<span class="synType">background-color</span>: <span class="synConstant">blue</span>;
<span class="synIdentifier">}</span>
</pre><p>余計なコメントがくっついていてちょっと冗長な感じ。</p>

</div>
<div class="section">
<h3>.<a class="keyword" href="http://d.hatena.ne.jp/keyword/css">css</a> ファイルの Minify （軽量化）</h3>
<p>けれど、「OrangeBits Compiler」には Minify 機能もついているので大丈夫。冗長な表現を削って、ファイルの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DA%A5%A4%A5%ED%A1%BC%A5%C9">ペイロード</a>（転送する際のサイズ）を少なくしてくれる。</p><p><img src="20120815160433.png" alt="f:id:daruyanagi:20120815160433p:plain" title="f:id:daruyanagi:20120815160433p:plain" class="hatena-fotolife"></p><p>使い方は簡単で、コンテキストメニューから［Minify］を選択するだけ。オプションで Auto Minify 機能を利用することもできる。</p><p><img src="20120815160744.png" alt="f:id:daruyanagi:20120815160744p:plain" title="f:id:daruyanagi:20120815160744p:plain" class="hatena-fotolife"></p><p>“Sample.min.<a class="keyword" href="http://d.hatena.ne.jp/keyword/css">css</a>”が生成され、コードがめちゃくちゃ短くなった！</p><p>LESS は変数以外にも、</p>

<ul>
<li>Mixins（スタイルをグループ化して置き換え、変数を渡して関数のように使うこともできる）</li>
<li>Nested Rules（ルールのネスト）</li>
<li>Operations（値の計算。マージンや色の計算に便利）</li>
<li>Functions（値の計算に便利なビルトイン関数が最初から用意されている）</li>
</ul><p>みたいな機能があるので便利。「OrangeBits Compiler」自体はほかの言語にも対応しているけれど、個人的には小規模 Web サイトでも便利なのはやっぱりこの LESS かなぁ、と思う。「<a class="keyword" href="http://d.hatena.ne.jp/keyword/WebMatrix">WebMatrix</a> + <a class="keyword" href="http://d.hatena.ne.jp/keyword/ASP.NET">ASP.NET</a> Web Pages でキレイにコーディングしたい」シリーズでも、 LESS で <a class="keyword" href="http://d.hatena.ne.jp/keyword/CSS">CSS</a> を書いていくつもり！。</p>

<ul>
<li><a href="http://blogs.msdn.com/b/chack/archive/2012/06/19/new-features-webmatrix-2-osc-2012-hokkaido-session-follow-up.aspx">
WebMatrix 2 &#x65B0;&#x6A5F;&#x80FD; &#xFF5E; OSC 2012 Hokkaido &#x30BB;&#x30C3;&#x30B7;&#x30E7;&#x30F3; &#x30D5;&#x30A9;&#x30ED;&#x30FC;&#x30A2;&#x30C3;&#x30D7; (&#x305D;&#x306E;&#xFF11;) &#xFF5E; - THE TRUTH IS OUT THERE - Site Home - MSDN Blogs
</a></li>
<li><a href="http://blogs.msdn.com/b/chack/archive/2012/08/14/how-to-use-minifier-of-javascript-and-css-on-webmatrix-2.aspx">
WebMatrix 2 &#x3067; JavaScript &#x3084; CSS &#x3092;&#x6700;&#x5C0F;&#x5316;&#x3059;&#x308B;&#x65B9;&#x6CD5; - THE TRUTH IS OUT THERE - Site Home - MSDN Blogs
</a></li>
</ul>
</div><div class="footnote">
<p class="footnote"><a href="#fn1" name="f1" class="footnote-number">*1</a><span class="footnote-delimiter">:</span><span class="footnote-text">「<a class="keyword" href="http://d.hatena.ne.jp/keyword/WebMatrix">WebMatrix</a> 2」は開発時コンパイルなのでサーバーにもクライアントにも負荷をかけないぞ！</span></p>
</div>