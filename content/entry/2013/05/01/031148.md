
+++
date = "2013-05-01 03:11:48 +0000 UTC"
draft = false
title = "Windows Store Apps：Cookie を取得して、ログインが必要なページを閲覧する（はてなフォトライフ）"
tags = ["Windows ストア アプリ","C#","はてな"]

+++


{{< figure src="/images/20130501024203.png"  >}}

てはて、<a href="https://blog.daruyanagi.jp/entry/2013/04/30/190004">Widows Store Apps: WSSE 認証（はてなフォトライフ） - だるろぐ</a> で AtomPub API（<a href="http://developer.hatena.ne.jp/ja/documents/fotolife/apis/atom">はてなフォトライフAtomAPI - Hatena Developer Center</a>）を無事叩けるようになったのだが、これがショボい。ファイルの操作系（EditURI）はともかく、情報の取得系（FeedURI）がとくにヘボくて、ちゃんと情報が取れないわ<a href="#f-eed2f1fc" name="fn-eed2f1fc" title="うちの環境では hatena:imageurl の情報が欠損する">*1</a>、ルートフォルダの内容しか取得できないわ。どうやら「情報の取得には RSS を使ってね」ということのようだ。なんだそれ。確かにそれでたいていは十分かもしれないけど、フォルダの列挙なんかはどうするんだ……こんなんだったらスクレイピング前提で組んだほうが早かった。まぁ、それはともかく。RSS を使えば（直近の）画像は取得できるが、非公開フォルダの画像に関しては、当然ログインが必要だ。なんとかして Cookie を取得し、それを使いまわさなければならない。というわけで、やってみた。


