
+++
date = "2013-04-22 20:07:09 +0000 UTC"
draft = false
title = "WebMatrix 3"
tags = ["WebMatrix","JavaScript ","ASP.net Web Pages"]

+++
{{< figure src="/images/20130421155340.png"  >}}<br/>


<ul>
<li><a href="https://blog.daruyanagi.jp/entry/2013/04/20/224501">WebMatrix 3: フィードの購読者数を取得する（1：サーバーサイド編） - だるろぐ</a></li>
<li><a href="https://blog.daruyanagi.jp/entry/2013/04/21/154036">WebMatrix 3: フィードの購読者数を取得する（2: JavaScript 編） - だるろぐ</a></li>
<li><a href="https://blog.daruyanagi.jp/entry/2013/04/21/160348">WebMatrix 3: フィードの購読者数を取得する（3: CSS 編） - だるろぐ</a></li>
</ul>一連の記事では、FeedCount の結果を JSON でやり取りしていました。

<div class="section">
    ### JSON
    
<div class="section">
    #### サーバーサイド
    ```cs
// ~/FeedCount.cshtml

Response.Clear();
Response.ContentType = "application/json";
Response.Write(Json.Encode(data));
Response.End();

```
</div>
<div class="section">
    #### 渡されるデータ（例）
    ```javascript
{"livedoor":6,"total":6}

```
</div>
<div class="section">
    #### クライアントサイド
    ```javascript
// ~/Script/SocialButtons.js

$.ajax({
    url: &#39;/FeedCount/&#39; + url,
    dataType: &#39;json&#39;,
    success: function (json) {
        element.text(json.total || 0);
    }
});

```けれど、Twitter や Facebook における共有数は JSONP で処理していました。それに合わせて、FeedCount も JSONP で処理できないか？　と思ったのですが、$.ajax の dataType を &#39;jsonp&#39; にするだけでは動きません。サーバーサイドにも手を加えなければならないみたい。

</div>
</div>

